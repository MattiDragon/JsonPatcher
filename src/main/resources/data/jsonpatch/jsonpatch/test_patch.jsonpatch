# Hashtags are comments

# The @ sign signifies metadata, it's not part of the code, but instead read before any code runs.
# Can theoretically be anywhere, but is usually at the top of the file

# Mandatory script version
@version 1

# Target file. Any json files in resource and data packs should work.
# Uses custom glob-like syntax
@target minecraft:recipes/*arrow.json

# We only do shaped recipes (otherwise we would have to deal with the tipped arrow special recipe)
if (type == "minecraft:crafting_shaped") {
    # Variables! val is immutable, var is mutable.
    # Names must start with a dollar sign to differentiate them from values in the json.
    val $result = result;

    # The apply statement allows you to swap out the root element
    apply (key) {
        # You can escape names with weird characters with single quotes
        '#' = {
            tag: "minecraft:coals",
        };

        if ($result.item == "minecraft:arrow") delete X;
    }


    if (result.item == "minecraft:arrow") {
        # Array assignment
        pattern[0] = "#";
    }

    # Math, with proper order of operations
    $result.count += 2 + (10 - 9) * 3;
}
